{"version":3,"sources":["errorHandler.js"],"names":["fsHelper","deleteFile","isNumber","Number","isNaN","parseFloat","n","isFloat","errorHandler","createHandlerError","error","res","filePath","status","send","notFoundHandlerError","fieldName","message","incompleteFieldHandlerError","fileTypeHandleError","json","fileSizeHandleError","usernameHandlerError","emailHandlerError","phoneHandlerError","questionHandlerError","userNotPrestentHandlerError","noTokenHandlerError","auth","failedAuthHandlerError","parametersHandlerError","req","params","questionId","isInteger","parseInt"],"mappings":"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","file":"errorHandler.js","sourceRoot":"/home/somto/1Projects/mentorship project/StackOverflow-lite/server/server/controllers/utilities","sourcesContent":["import fsHelper from '../../../utilities/fileSystem';\n\nconst [deleteFile] = [fsHelper.deleteFile];// Delete file helper method\n\n// number validation\nconst isNumber = n => !Number.isNaN(parseFloat(n));\n\nconst isFloat = n => Number(n) === n && n % 1 !== 0;\n\nconst errorHandler = {\n  createHandlerError(error, res, filePath) {\n    if (filePath) deleteFile(`./${filePath}`); // if file uploads delete it\n    return res.status(400).send(error);\n  },\n  notFoundHandlerError(fieldName, res, filePath) {\n    if (filePath) deleteFile(`./${filePath}`); // if file uploads delete it\n    return res.status(404).send({ message: `${fieldName} not found` });\n  },\n  incompleteFieldHandlerError(res, filePath) {\n    if (filePath) deleteFile(`./${filePath}`); // if file uploads delete it\n    return res.status(206).send({ message: 'Incomplete field' });\n  },\n  fileTypeHandleError(res) { // file type handleError\n    res.status(403).json({ message: 'Only .png and .jpg files are allowed!', error: true });\n  },\n  fileSizeHandleError(res) { // file size handleError\n    res.status(403).json({ message: 'file should not be more than 2mb!', error: true });\n  },\n  usernameHandlerError(res, filePath) {\n    if (filePath) deleteFile(`./${filePath}`); // if file uploads delete it\n    return res.status(400).send({ message: 'username already exists' });\n  },\n  emailHandlerError(res, filePath) {\n    if (filePath) deleteFile(`./${filePath}`); // if file uploads delete it\n    return res.status(400).send({ message: 'email already exists' });\n  },\n  phoneHandlerError(res, filePath) {\n    if (filePath) deleteFile(`./${filePath}`); // if file uploads delete it\n    return res.status(400).send({ message: 'phone already exists' });\n  },\n  questionHandlerError(res, filePath) {\n    if (filePath) deleteFile(`./${filePath}`); // if file uploads delete it\n    return res.status(400).send({ message: 'question already exists' });\n  },\n  userNotPrestentHandlerError(res, filePath) {\n    if (filePath) deleteFile(`./${filePath}`); // if file uploads delete it\n    return res.status(400).send({ message: 'user has been removed from the database' });\n  },\n  noTokenHandlerError(res) {\n    return res.status(401).send({ auth: false, message: 'No token provided.' });\n  },\n  failedAuthHandlerError(res) {\n    return res.status(500).send({ auth: false, message: 'Failed to authenticate token.' });\n  },\n  parametersHandlerError(req) {\n    if (!isNumber(req.params.questionId) || !Number.isInteger(parseInt(req.params.questionId, 10))\n        || req.params.questionId > 1000000000 || isFloat(parseFloat(req.params.questionId))) {\n      return true;\n    } return false;\n  }\n};\n\nexport default errorHandler;\n"]}