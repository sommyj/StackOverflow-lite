'use strict';var cov_ql1ilge0b=function(){var path="/home/somto/1Projects/mentorship project/StackOverflow-lite/server/server/controllers/utilities/errorHandler.js",hash="b0082da39cfd3672d4e3bf999175dc78ef2b2bc5",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/somto/1Projects/mentorship project/StackOverflow-lite/server/server/controllers/utilities/errorHandler.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:18},end:{line:7,column:58}},"2":{start:{line:9,column:19},end:{line:9,column:54}},"3":{start:{line:11,column:39},end:{line:11,column:93}},"4":{start:{line:13,column:11},end:{line:13,column:44}},"5":{start:{line:14,column:17},end:{line:14,column:24}},"6":{start:{line:18,column:15},end:{line:20,column:1}},"7":{start:{line:19,column:2},end:{line:19,column:38}},"8":{start:{line:22,column:14},end:{line:24,column:1}},"9":{start:{line:23,column:2},end:{line:23,column:40}},"10":{start:{line:26,column:19},end:{line:78,column:1}},"11":{start:{line:28,column:4},end:{line:28,column:46}},"12":{start:{line:28,column:18},end:{line:28,column:46}},"13":{start:{line:29,column:4},end:{line:29,column:39}},"14":{start:{line:32,column:4},end:{line:32,column:46}},"15":{start:{line:32,column:18},end:{line:32,column:46}},"16":{start:{line:33,column:4},end:{line:33,column:71}},"17":{start:{line:36,column:4},end:{line:36,column:46}},"18":{start:{line:36,column:18},end:{line:36,column:46}},"19":{start:{line:37,column:4},end:{line:37,column:65}},"20":{start:{line:41,column:4},end:{line:41,column:92}},"21":{start:{line:45,column:4},end:{line:45,column:88}},"22":{start:{line:48,column:4},end:{line:48,column:46}},"23":{start:{line:48,column:18},end:{line:48,column:46}},"24":{start:{line:49,column:4},end:{line:49,column:72}},"25":{start:{line:52,column:4},end:{line:52,column:46}},"26":{start:{line:52,column:18},end:{line:52,column:46}},"27":{start:{line:53,column:4},end:{line:53,column:69}},"28":{start:{line:56,column:4},end:{line:56,column:46}},"29":{start:{line:56,column:18},end:{line:56,column:46}},"30":{start:{line:57,column:4},end:{line:57,column:69}},"31":{start:{line:60,column:4},end:{line:60,column:46}},"32":{start:{line:60,column:18},end:{line:60,column:46}},"33":{start:{line:61,column:4},end:{line:61,column:72}},"34":{start:{line:64,column:4},end:{line:64,column:46}},"35":{start:{line:64,column:18},end:{line:64,column:46}},"36":{start:{line:65,column:4},end:{line:65,column:88}},"37":{start:{line:68,column:4},end:{line:68,column:80}},"38":{start:{line:71,column:4},end:{line:71,column:91}},"39":{start:{line:74,column:4},end:{line:76,column:5}},"40":{start:{line:75,column:6},end:{line:75,column:18}},"41":{start:{line:76,column:5},end:{line:76,column:18}},"42":{start:{line:80,column:0},end:{line:80,column:31}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:11,column:9},end:{line:11,column:31}},loc:{start:{line:11,column:37},end:{line:11,column:95}},line:11},"1":{name:"isNumber",decl:{start:{line:18,column:24},end:{line:18,column:32}},loc:{start:{line:18,column:36},end:{line:20,column:1}},line:18},"2":{name:"isFloat",decl:{start:{line:22,column:23},end:{line:22,column:30}},loc:{start:{line:22,column:34},end:{line:24,column:1}},line:22},"3":{name:"createHandlerError",decl:{start:{line:27,column:31},end:{line:27,column:49}},loc:{start:{line:27,column:72},end:{line:30,column:3}},line:27},"4":{name:"notFoundHandlerError",decl:{start:{line:31,column:33},end:{line:31,column:53}},loc:{start:{line:31,column:80},end:{line:34,column:3}},line:31},"5":{name:"incompleteFieldHandlerError",decl:{start:{line:35,column:40},end:{line:35,column:67}},loc:{start:{line:35,column:83},end:{line:38,column:3}},line:35},"6":{name:"fileTypeHandleError",decl:{start:{line:39,column:32},end:{line:39,column:51}},loc:{start:{line:39,column:57},end:{line:42,column:3}},line:39},"7":{name:"fileSizeHandleError",decl:{start:{line:43,column:32},end:{line:43,column:51}},loc:{start:{line:43,column:57},end:{line:46,column:3}},line:43},"8":{name:"usernameHandlerError",decl:{start:{line:47,column:33},end:{line:47,column:53}},loc:{start:{line:47,column:69},end:{line:50,column:3}},line:47},"9":{name:"emailHandlerError",decl:{start:{line:51,column:30},end:{line:51,column:47}},loc:{start:{line:51,column:63},end:{line:54,column:3}},line:51},"10":{name:"phoneHandlerError",decl:{start:{line:55,column:30},end:{line:55,column:47}},loc:{start:{line:55,column:63},end:{line:58,column:3}},line:55},"11":{name:"questionHandlerError",decl:{start:{line:59,column:33},end:{line:59,column:53}},loc:{start:{line:59,column:69},end:{line:62,column:3}},line:59},"12":{name:"userNotPrestentHandlerError",decl:{start:{line:63,column:40},end:{line:63,column:67}},loc:{start:{line:63,column:83},end:{line:66,column:3}},line:63},"13":{name:"noTokenHandlerError",decl:{start:{line:67,column:32},end:{line:67,column:51}},loc:{start:{line:67,column:57},end:{line:69,column:3}},line:67},"14":{name:"failedAuthHandlerError",decl:{start:{line:70,column:35},end:{line:70,column:57}},loc:{start:{line:70,column:63},end:{line:72,column:3}},line:70},"15":{name:"parametersHandlerError",decl:{start:{line:73,column:35},end:{line:73,column:57}},loc:{start:{line:73,column:63},end:{line:77,column:3}},line:73}},branchMap:{"0":{loc:{start:{line:11,column:46},end:{line:11,column:92}},type:"cond-expr",locations:[{start:{line:11,column:70},end:{line:11,column:73}},{start:{line:11,column:76},end:{line:11,column:92}}],line:11},"1":{loc:{start:{line:11,column:46},end:{line:11,column:67}},type:"binary-expr",locations:[{start:{line:11,column:46},end:{line:11,column:49}},{start:{line:11,column:53},end:{line:11,column:67}}],line:11},"2":{loc:{start:{line:23,column:9},end:{line:23,column:39}},type:"binary-expr",locations:[{start:{line:23,column:9},end:{line:23,column:24}},{start:{line:23,column:28},end:{line:23,column:39}}],line:23},"3":{loc:{start:{line:28,column:4},end:{line:28,column:46}},type:"if",locations:[{start:{line:28,column:4},end:{line:28,column:46}},{start:{line:28,column:4},end:{line:28,column:46}}],line:28},"4":{loc:{start:{line:32,column:4},end:{line:32,column:46}},type:"if",locations:[{start:{line:32,column:4},end:{line:32,column:46}},{start:{line:32,column:4},end:{line:32,column:46}}],line:32},"5":{loc:{start:{line:36,column:4},end:{line:36,column:46}},type:"if",locations:[{start:{line:36,column:4},end:{line:36,column:46}},{start:{line:36,column:4},end:{line:36,column:46}}],line:36},"6":{loc:{start:{line:48,column:4},end:{line:48,column:46}},type:"if",locations:[{start:{line:48,column:4},end:{line:48,column:46}},{start:{line:48,column:4},end:{line:48,column:46}}],line:48},"7":{loc:{start:{line:52,column:4},end:{line:52,column:46}},type:"if",locations:[{start:{line:52,column:4},end:{line:52,column:46}},{start:{line:52,column:4},end:{line:52,column:46}}],line:52},"8":{loc:{start:{line:56,column:4},end:{line:56,column:46}},type:"if",locations:[{start:{line:56,column:4},end:{line:56,column:46}},{start:{line:56,column:4},end:{line:56,column:46}}],line:56},"9":{loc:{start:{line:60,column:4},end:{line:60,column:46}},type:"if",locations:[{start:{line:60,column:4},end:{line:60,column:46}},{start:{line:60,column:4},end:{line:60,column:46}}],line:60},"10":{loc:{start:{line:64,column:4},end:{line:64,column:46}},type:"if",locations:[{start:{line:64,column:4},end:{line:64,column:46}},{start:{line:64,column:4},end:{line:64,column:46}}],line:64},"11":{loc:{start:{line:74,column:4},end:{line:76,column:5}},type:"if",locations:[{start:{line:74,column:4},end:{line:76,column:5}},{start:{line:74,column:4},end:{line:76,column:5}}],line:74},"12":{loc:{start:{line:74,column:8},end:{line:74,column:182}},type:"binary-expr",locations:[{start:{line:74,column:8},end:{line:74,column:40}},{start:{line:74,column:44},end:{line:74,column:98}},{start:{line:74,column:102},end:{line:74,column:136}},{start:{line:74,column:140},end:{line:74,column:182}}],line:74}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_ql1ilge0b.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _fileSystem=(cov_ql1ilge0b.s[1]++,require('../../../utilities/fileSystem'));var _fileSystem2=(cov_ql1ilge0b.s[2]++,_interopRequireDefault(_fileSystem));function _interopRequireDefault(obj){cov_ql1ilge0b.f[0]++;cov_ql1ilge0b.s[3]++;return(cov_ql1ilge0b.b[1][0]++,obj)&&(cov_ql1ilge0b.b[1][1]++,obj.__esModule)?(cov_ql1ilge0b.b[0][0]++,obj):(cov_ql1ilge0b.b[0][1]++,{default:obj});}var _ref=(cov_ql1ilge0b.s[4]++,[_fileSystem2.default.deleteFile]),deleteFile=(cov_ql1ilge0b.s[5]++,_ref[0]);// Delete file helper method
// number validation
cov_ql1ilge0b.s[6]++;var isNumber=function isNumber(n){cov_ql1ilge0b.f[1]++;cov_ql1ilge0b.s[7]++;return!Number.isNaN(parseFloat(n));};cov_ql1ilge0b.s[8]++;var isFloat=function isFloat(n){cov_ql1ilge0b.f[2]++;cov_ql1ilge0b.s[9]++;return(cov_ql1ilge0b.b[2][0]++,Number(n)===n)&&(cov_ql1ilge0b.b[2][1]++,n%1!==0);};var errorHandler=(cov_ql1ilge0b.s[10]++,{createHandlerError:function createHandlerError(error,res,filePath){cov_ql1ilge0b.f[3]++;cov_ql1ilge0b.s[11]++;if(filePath){cov_ql1ilge0b.b[3][0]++;cov_ql1ilge0b.s[12]++;deleteFile('./'+filePath);}else{cov_ql1ilge0b.b[3][1]++;}// if file uploads delete it
cov_ql1ilge0b.s[13]++;return res.status(400).send(error);},notFoundHandlerError:function notFoundHandlerError(fieldName,res,filePath){cov_ql1ilge0b.f[4]++;cov_ql1ilge0b.s[14]++;if(filePath){cov_ql1ilge0b.b[4][0]++;cov_ql1ilge0b.s[15]++;deleteFile('./'+filePath);}else{cov_ql1ilge0b.b[4][1]++;}// if file uploads delete it
cov_ql1ilge0b.s[16]++;return res.status(404).send({message:fieldName+' not found'});},incompleteFieldHandlerError:function incompleteFieldHandlerError(res,filePath){cov_ql1ilge0b.f[5]++;cov_ql1ilge0b.s[17]++;if(filePath){cov_ql1ilge0b.b[5][0]++;cov_ql1ilge0b.s[18]++;deleteFile('./'+filePath);}else{cov_ql1ilge0b.b[5][1]++;}// if file uploads delete it
cov_ql1ilge0b.s[19]++;return res.status(206).send({message:'Incomplete field'});},fileTypeHandleError:function fileTypeHandleError(res){cov_ql1ilge0b.f[6]++;cov_ql1ilge0b.s[20]++;// file type handleError
res.status(403).json({message:'Only .png and .jpg files are allowed!',error:true});},fileSizeHandleError:function fileSizeHandleError(res){cov_ql1ilge0b.f[7]++;cov_ql1ilge0b.s[21]++;// file size handleError
res.status(403).json({message:'file should not be more than 2mb!',error:true});},usernameHandlerError:function usernameHandlerError(res,filePath){cov_ql1ilge0b.f[8]++;cov_ql1ilge0b.s[22]++;if(filePath){cov_ql1ilge0b.b[6][0]++;cov_ql1ilge0b.s[23]++;deleteFile('./'+filePath);}else{cov_ql1ilge0b.b[6][1]++;}// if file uploads delete it
cov_ql1ilge0b.s[24]++;return res.status(400).send({message:'username already exists'});},emailHandlerError:function emailHandlerError(res,filePath){cov_ql1ilge0b.f[9]++;cov_ql1ilge0b.s[25]++;if(filePath){cov_ql1ilge0b.b[7][0]++;cov_ql1ilge0b.s[26]++;deleteFile('./'+filePath);}else{cov_ql1ilge0b.b[7][1]++;}// if file uploads delete it
cov_ql1ilge0b.s[27]++;return res.status(400).send({message:'email already exists'});},phoneHandlerError:function phoneHandlerError(res,filePath){cov_ql1ilge0b.f[10]++;cov_ql1ilge0b.s[28]++;if(filePath){cov_ql1ilge0b.b[8][0]++;cov_ql1ilge0b.s[29]++;deleteFile('./'+filePath);}else{cov_ql1ilge0b.b[8][1]++;}// if file uploads delete it
cov_ql1ilge0b.s[30]++;return res.status(400).send({message:'phone already exists'});},questionHandlerError:function questionHandlerError(res,filePath){cov_ql1ilge0b.f[11]++;cov_ql1ilge0b.s[31]++;if(filePath){cov_ql1ilge0b.b[9][0]++;cov_ql1ilge0b.s[32]++;deleteFile('./'+filePath);}else{cov_ql1ilge0b.b[9][1]++;}// if file uploads delete it
cov_ql1ilge0b.s[33]++;return res.status(400).send({message:'question already exists'});},userNotPrestentHandlerError:function userNotPrestentHandlerError(res,filePath){cov_ql1ilge0b.f[12]++;cov_ql1ilge0b.s[34]++;if(filePath){cov_ql1ilge0b.b[10][0]++;cov_ql1ilge0b.s[35]++;deleteFile('./'+filePath);}else{cov_ql1ilge0b.b[10][1]++;}// if file uploads delete it
cov_ql1ilge0b.s[36]++;return res.status(400).send({message:'user has been removed from the database'});},noTokenHandlerError:function noTokenHandlerError(res){cov_ql1ilge0b.f[13]++;cov_ql1ilge0b.s[37]++;return res.status(401).send({auth:false,message:'No token provided.'});},failedAuthHandlerError:function failedAuthHandlerError(res){cov_ql1ilge0b.f[14]++;cov_ql1ilge0b.s[38]++;return res.status(500).send({auth:false,message:'Failed to authenticate token.'});},parametersHandlerError:function parametersHandlerError(req){cov_ql1ilge0b.f[15]++;cov_ql1ilge0b.s[39]++;if((cov_ql1ilge0b.b[12][0]++,!isNumber(req.params.questionId))||(cov_ql1ilge0b.b[12][1]++,!Number.isInteger(parseInt(req.params.questionId,10)))||(cov_ql1ilge0b.b[12][2]++,req.params.questionId>1000000000)||(cov_ql1ilge0b.b[12][3]++,isFloat(parseFloat(req.params.questionId)))){cov_ql1ilge0b.b[11][0]++;cov_ql1ilge0b.s[40]++;return true;}else{cov_ql1ilge0b.b[11][1]++;}cov_ql1ilge0b.s[41]++;return false;}});cov_ql1ilge0b.s[42]++;exports.default=errorHandler;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9ySGFuZGxlci5qcyJdLCJuYW1lcyI6WyJmc0hlbHBlciIsImRlbGV0ZUZpbGUiLCJpc051bWJlciIsIk51bWJlciIsImlzTmFOIiwicGFyc2VGbG9hdCIsIm4iLCJpc0Zsb2F0IiwiZXJyb3JIYW5kbGVyIiwiY3JlYXRlSGFuZGxlckVycm9yIiwiZXJyb3IiLCJyZXMiLCJmaWxlUGF0aCIsInN0YXR1cyIsInNlbmQiLCJub3RGb3VuZEhhbmRsZXJFcnJvciIsImZpZWxkTmFtZSIsIm1lc3NhZ2UiLCJpbmNvbXBsZXRlRmllbGRIYW5kbGVyRXJyb3IiLCJmaWxlVHlwZUhhbmRsZUVycm9yIiwianNvbiIsImZpbGVTaXplSGFuZGxlRXJyb3IiLCJ1c2VybmFtZUhhbmRsZXJFcnJvciIsImVtYWlsSGFuZGxlckVycm9yIiwicGhvbmVIYW5kbGVyRXJyb3IiLCJxdWVzdGlvbkhhbmRsZXJFcnJvciIsInVzZXJOb3RQcmVzdGVudEhhbmRsZXJFcnJvciIsIm5vVG9rZW5IYW5kbGVyRXJyb3IiLCJhdXRoIiwiZmFpbGVkQXV0aEhhbmRsZXJFcnJvciIsInBhcmFtZXRlcnNIYW5kbGVyRXJyb3IiLCJyZXEiLCJwYXJhbXMiLCJxdWVzdGlvbklkIiwiaXNJbnRlZ2VyIiwicGFyc2VJbnQiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7V0FFcUIsQ0FBQ0EscUJBQVNDLFVBQVYsQztJQUFkQSxVLFlBQW9DOztBQUUzQzs7QUFDQSxJQUFNQyxXQUFXLFNBQVhBLFFBQVc7QUFBQSxTQUFLLENBQUNDLE9BQU9DLEtBQVAsQ0FBYUMsV0FBV0MsQ0FBWCxDQUFiLENBQU47QUFBQSxDQUFqQjs7QUFFQSxJQUFNQyxVQUFVLFNBQVZBLE9BQVU7QUFBQSxTQUFLSixPQUFPRyxDQUFQLE1BQWNBLENBQWQsSUFBbUJBLElBQUksQ0FBSixLQUFVLENBQWxDO0FBQUEsQ0FBaEI7O0FBRUEsSUFBTUUsZUFBZTtBQUNuQkMsb0JBRG1CLDhCQUNBQyxLQURBLEVBQ09DLEdB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QUlFLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixFQUFFYyxNQUFNLEtBQVIsRUFBZVgsU0FBUyxvQkFBeEIsRUFBckIsQ0FBUDtBQUNELEdBekNrQjtBQTBDbkJZLHdCQTFDbUIsa0NBMENJbEIsR0ExQ0osRUEwQ1M7QUFDMUIsV0FBT0EsSUFBSUUsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLEVBQUVjLE1BQU0sS0FBUixFQUFlWCxTQUFTLCtCQUF4QixFQUFyQixDQUFQO0FBQ0QsR0E1Q2tCO0FBNkNuQmEsd0JBN0NtQixrQ0E2Q0lDLEdBN0NKLEVBNkNTO0FBQzFCLFFBQUksQ0FBQzdCLFNBQVM2QixJQUFJQyxNQUFKLENBQVdDLFVBQXBCLENBQUQsSUFBb0MsQ0FBQzlCLE9BQU8rQixTQUFQLENBQWlCQyxTQUFTSixJQUFJQyxNQUFKLENBQVdDLFVBQXBCLEVBQWdDLEVBQWhDLENBQWpCLENBQXJDLElBQ0dGLElBQUlDLE1BQUosQ0FBV0MsVUFBWCxHQUF3QixVQUQzQixJQUN5QzFCLFFBQVFGLFdBQVcwQixJQUFJQyxNQUFKLENBQVdDLFVBQXRCLENBQVIsQ0FEN0MsRUFDeUY7QUFDdkYsYUFBTyxJQUFQO0FBQ0QsS0FBQyxPQUFPLEtBQVA7QUFDSDtBQWxEa0IsQ0FBckI7O2tCQXFEZXpCLFkiLCJmaWxlIjoiZXJyb3JIYW5kbGVyLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3NvbXRvLzFQcm9qZWN0cy9tZW50b3JzaGlwIHByb2plY3QvU3RhY2tPdmVyZmxvdy1saXRlL3NlcnZlci9zZXJ2ZXIvY29udHJvbGxlcnMvdXRpbGl0aWVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzSGVscGVyIGZyb20gJy4uLy4uLy4uL3V0aWxpdGllcy9maWxlU3lzdGVtJztcblxuY29uc3QgW2RlbGV0ZUZpbGVdID0gW2ZzSGVscGVyLmRlbGV0ZUZpbGVdOy8vIERlbGV0ZSBmaWxlIGhlbHBlciBtZXRob2RcblxuLy8gbnVtYmVyIHZhbGlkYXRpb25cbmNvbnN0IGlzTnVtYmVyID0gbiA9PiAhTnVtYmVyLmlzTmFOKHBhcnNlRmxvYXQobikpO1xuXG5jb25zdCBpc0Zsb2F0ID0gbiA9PiBOdW1iZXIobikgPT09IG4gJiYgbiAlIDEgIT09IDA7XG5cbmNvbnN0IGVycm9ySGFuZGxlciA9IHtcbiAgY3JlYXRlSGFuZGxlckVycm9yKGVycm9yLCByZXMsIGZpbGVQYXRoKSB7XG4gICAgaWYgKGZpbGVQYXRoKSBkZWxldGVGaWxlKGAuLyR7ZmlsZVBhdGh9YCk7IC8vIGlmIGZpbGUgdXBsb2FkcyBkZWxldGUgaXRcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3IpO1xuICB9LFxuICBub3RGb3VuZEhhbmRsZXJFcnJvcihmaWVsZE5hbWUsIHJlcywgZmlsZVBhdGgpIHtcbiAgICBpZiAoZmlsZVBhdGgpIGRlbGV0ZUZpbGUoYC4vJHtmaWxlUGF0aH1gKTsgLy8gaWYgZmlsZSB1cGxvYWRzIGRlbGV0ZSBpdFxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IGAke2ZpZWxkTmFtZX0gbm90IGZvdW5kYCB9KTtcbiAgfSxcbiAgaW5jb21wbGV0ZUZpZWxkSGFuZGxlckVycm9yKHJlcywgZmlsZVBhdGgpIHtcbiAgICBpZiAoZmlsZVBhdGgpIGRlbGV0ZUZpbGUoYC4vJHtmaWxlUGF0aH1gKTsgLy8gaWYgZmlsZSB1cGxvYWRzIGRlbGV0ZSBpdFxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwNikuc2VuZCh7IG1lc3NhZ2U6ICdJbmNvbXBsZXRlIGZpZWxkJyB9KTtcbiAgfSxcbiAgZmlsZVR5cGVIYW5kbGVFcnJvcihyZXMpIHsgLy8gZmlsZSB0eXBlIGhhbmRsZUVycm9yXG4gICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnT25seSAucG5nIGFuZCAuanBnIGZpbGVzIGFyZSBhbGxvd2VkIScsIGVycm9yOiB0cnVlIH0pO1xuICB9LFxuICBmaWxlU2l6ZUhhbmRsZUVycm9yKHJlcykgeyAvLyBmaWxlIHNpemUgaGFuZGxlRXJyb3JcbiAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6ICdmaWxlIHNob3VsZCBub3QgYmUgbW9yZSB0aGFuIDJtYiEnLCBlcnJvcjogdHJ1ZSB9KTtcbiAgfSxcbiAgdXNlcm5hbWVIYW5kbGVyRXJyb3IocmVzLCBmaWxlUGF0aCkge1xuICAgIGlmIChmaWxlUGF0aCkgZGVsZXRlRmlsZShgLi8ke2ZpbGVQYXRofWApOyAvLyBpZiBmaWxlIHVwbG9hZHMgZGVsZXRlIGl0XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgbWVzc2FnZTogJ3VzZXJuYW1lIGFscmVhZHkgZXhpc3RzJyB9KTtcbiAgfSxcbiAgZW1haWxIYW5kbGVyRXJyb3IocmVzLCBmaWxlUGF0aCkge1xuICAgIGlmIChmaWxlUGF0aCkgZGVsZXRlRmlsZShgLi8ke2ZpbGVQYXRofWApOyAvLyBpZiBmaWxlIHVwbG9hZHMgZGVsZXRlIGl0XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgbWVzc2FnZTogJ2VtYWlsIGFscmVhZHkgZXhpc3RzJyB9KTtcbiAgfSxcbiAgcGhvbmVIYW5kbGVyRXJyb3IocmVzLCBmaWxlUGF0aCkge1xuICAgIGlmIChmaWxlUGF0aCkgZGVsZXRlRmlsZShgLi8ke2ZpbGVQYXRofWApOyAvLyBpZiBmaWxlIHVwbG9hZHMgZGVsZXRlIGl0XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgbWVzc2FnZTogJ3Bob25lIGFscmVhZHkgZXhpc3RzJyB9KTtcbiAgfSxcbiAgcXVlc3Rpb25IYW5kbGVyRXJyb3IocmVzLCBmaWxlUGF0aCkge1xuICAgIGlmIChmaWxlUGF0aCkgZGVsZXRlRmlsZShgLi8ke2ZpbGVQYXRofWApOyAvLyBpZiBmaWxlIHVwbG9hZHMgZGVsZXRlIGl0XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgbWVzc2FnZTogJ3F1ZXN0aW9uIGFscmVhZHkgZXhpc3RzJyB9KTtcbiAgfSxcbiAgdXNlck5vdFByZXN0ZW50SGFuZGxlckVycm9yKHJlcywgZmlsZVBhdGgpIHtcbiAgICBpZiAoZmlsZVBhdGgpIGRlbGV0ZUZpbGUoYC4vJHtmaWxlUGF0aH1gKTsgLy8gaWYgZmlsZSB1cGxvYWRzIGRlbGV0ZSBpdFxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IG1lc3NhZ2U6ICd1c2VyIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgZGF0YWJhc2UnIH0pO1xuICB9LFxuICBub1Rva2VuSGFuZGxlckVycm9yKHJlcykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IGF1dGg6IGZhbHNlLCBtZXNzYWdlOiAnTm8gdG9rZW4gcHJvdmlkZWQuJyB9KTtcbiAgfSxcbiAgZmFpbGVkQXV0aEhhbmRsZXJFcnJvcihyZXMpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBhdXRoOiBmYWxzZSwgbWVzc2FnZTogJ0ZhaWxlZCB0byBhdXRoZW50aWNhdGUgdG9rZW4uJyB9KTtcbiAgfSxcbiAgcGFyYW1ldGVyc0hhbmRsZXJFcnJvcihyZXEpIHtcbiAgICBpZiAoIWlzTnVtYmVyKHJlcS5wYXJhbXMucXVlc3Rpb25JZCkgfHwgIU51bWJlci5pc0ludGVnZXIocGFyc2VJbnQocmVxLnBhcmFtcy5xdWVzdGlvbklkLCAxMCkpXG4gICAgICAgIHx8IHJlcS5wYXJhbXMucXVlc3Rpb25JZCA+IDEwMDAwMDAwMDAgfHwgaXNGbG9hdChwYXJzZUZsb2F0KHJlcS5wYXJhbXMucXVlc3Rpb25JZCkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZXJyb3JIYW5kbGVyO1xuIl19